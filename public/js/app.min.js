(function ($) {	
  $(document).ready(function() {

  		$.ajax({
  			type: "GET",
  			url: '/api/v1/posts/byNumber/6'
		}).done(function (data) {
  			$.get('./js/templates/ArticleDisplay.mst', function (template) {
  				var articles = {
            "articles" : data.data
          }
  				
          var rendered = Mustache.render(template, articles);
  				$('#articleDisplay').html(rendered);
        });
  			
  		});


  		
 });
 

 }(jQuery));
(function ($) { 
  $(document).ready(function() {

      /*
    |--------------------------------------------------------------------------
    | Pop up the Article Footer on Scroll
    |--------------------------------------------------------------------------
    |
    */
   
   if ($('#articleContent').length !== 0) { 
      $(document).scroll(function (e) {
        
        
        var y = $(this).scrollTop();    
        var articleContent = $('#articleContent').position().top;
        var siteFooter = $('#siteFooter').position().top;

        
         //Content past 200
         if (y > articleContent + 200) {
              $('#articleFooter').addClass('active');
              
              //Footer comes from bottom
              if (y + window.innerHeight > siteFooter) {
                $('#articleFooter').removeClass('active');  
              }
            
            } else {
              $('#articleFooter').removeClass('active');
            }
        });


      //Submit the mailchimp form;
      $('#mailChimpSubscribe').on('submit', function (e) {
        e.preventDefault();

      });
    }

  });
 }(jQuery));

  

  

(function ($) {	
  $(document).ready(function() {

      var url = window.location.href;
      var text = $('.callout').text();
      
      var buildLink = function(url) {
        return 'http://twitter.com/share?url='+ url + '&text=' + text + ' - @McDanielRDN';
      } 

      var popup = function (url, height, width) {
         window.open(url,'1429735674908','width='+width+',height='+height+',toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0');
      }

      $('.callout').append('<div class="callout__twitter"><i class="fa fa-twitter"></i> Tweet <div>')

      $('.callout__twitter').on('click', function (e) {
        e.preventDefault();
        popup(buildLink(url), 700, 500);
      })
  });
}( jQuery ));
(function ($) { 
  $(document).ready(function() {

		$('.collapsible').children('.collapsible-body').hide();

		$('.collapsible').children('.collapsible-header').on('click', function (e) {
			console.log('message');
			var next =  $(this).next('.collapsible-body')
			if (next.hasClass('active')) {
				next.removeClass('active').slideUp(500);
			} else {
				console.log('adding');
				next.addClass('active').slideDown(500);
			}
		})

  
  });
}( jQuery ));
(function ($) { 
  $(document).ready(function() {

  	$('#faqQuery').on('keyup', function (e) {
  		var query = $(e.target).val();
  		var _token = $(e.target).next('input').val();

      if (query === null) {
        $.ajax({
          type: "POST",
          url: 'api/v1/faqs/stared',
          data: { 
              'query' : query, 
              '_token' : _token 
           }
        }).done(function (data) {
            renderQuestion(data);
        });
      } else {
        $.ajax({
          type: "POST",
          url: 'api/v1/faqs/search',
          data: { 
              'query' : query, 
              '_token' : _token 
           }
        }).done(function (data) {
            renderQuestion(data);
        });
      }

  		
      var renderQuestion = function (data) {
          $.get('./js/templates/FaqQuestion.mst', function (template) {
            var faqs = {
              "faqs" : data
            }

            var rendered = Mustache.render(template, faqs);
            $('#faqQuestions').html(rendered);
          });
      }
  	})

  });
}( jQuery ));

  

/*
|--------------------------------------------------------------------------
| Javascript for Navigation
|--------------------------------------------------------------------------
|
|
*/
(function ($) {	
  $(document).ready(function() {

  /*
   |--------------------------------------------------------------------------
   | Main Menu
   |--------------------------------------------------------------------------
   |
   |
   */   

    /**
     * Make Logo click take you home
     */
    $('.logo').on('click', function () {
      window.location = "/";
    })

    

    /**
     * Open the Menu
     */
    $('#openMenu').on('click', function (e) {
      e.preventDefault();
      
      $(this).toggleClass('is-active');
      $('#navigation').toggleClass('is-active');
      $('.navigation__modal').toggleClass('is-active');
      $('body').toggleClass('nav-open');
    });


    /**
     * Close the Menu
     * @return 
     */
    $('.navigation__modal').on('click tap', function (e) {
      $(this).removeClass('is-active');
      $('#navigation').removeClass('is-active');
      $('#openMenu').removeClass('is-active');
      $('body').removeClass('nav-open');
    });


    /*
    |--------------------------------------------------------------------------
    | Drop Downs
    |--------------------------------------------------------------------------
    |
    |
    */
    var openMenu = null;

    //Have dropdowns operate on Click for Mobile.
    $('.Dropdown__trigger').on('tap', function (e) {
      e.preventDefault();
      dropDropDown($(this).attr('data-dropdown'));
    });

 
    /**
     * Drop the Dropdown
     * @param  {string} attr 
     * @return {DOM}      
     */
    var dropDropDown = function (attr) {
      var dropdown = $('#' + attr);

      if (dropdown.hasClass('is-active')) {
        dropdown.removeClass('is-active').slideUp(500);
      } else {
        dropdown.addClass('is-active').slideDown(500);
      }
    }


    /*
    |--------------------------------------------------------------------------
    | Scrolling Fixed Menu
    |--------------------------------------------------------------------------
    |
    |
    */

    //Add Fixed menu on Scroll  
    var lastScrollTop = 0;
    $(document).scroll(function (e) {
      var y = $(this).scrollTop();  
      var navigationOffset = $('#contentWrapper').position().top;
      
      var glued = $('#navigation').hasClass('glued');
      var fixed = $('#navigation').hasClass('fixed');

      if (y > navigationOffset-0 && !glued) {
        $('#navigation').addClass('fixed');
        $('body').addClass('nav-fixed');
      } else if (!glued) {
        $('#navigation').removeClass('fixed');
        $('body').removeClass('nav-fixed');
      }

      if (y > lastScrollTop && fixed && !glued) {   //downward Scroll
        $('#navigation').removeClass('in-view');  
        $('#quickNavigation').removeClass('in-view')
      } else if (!glued) { //updward scroll
        $('#navigation').addClass('in-view');
        $('#quickNavigation').addClass('in-view');
      }

      lastScrollTop = y;
    });




    

  });
}( jQuery ));


if (window.jQuery) {  
    // jQuery is loaded  
    
    //Initalize Materialize Shit here 
     $('.modal-trigger').leanModal();
	 $('.scrollspy').scrollSpy();
  
      
	// $('.dropdown-button').dropdown({
	// 	beloworigin: true,
	// 	hover: true,
	// 	constrainwidth: false
	// });
	

	 $.ajaxSetup({
		headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').val() }
	 });


	 
	 

} else {
    console.log('jquery is not loaded');
}
(function ($) { 
  $(document).ready(function() {

    /**
     * Ajax for All Forms
    */
    $('form[data-remote]').on('submit', function (e) {
      e.preventDefault();
      var form = $(this);
      var method = form.find('input[name="method"]').val() || 'POST';
      var url = form.prop('action');


      $.ajax({
        type: method,
        url: url,
        data: form.serialize(),
        beforeSend: function () {
          showPreloader();
        }
      }).done(function () {
        showMessage('success');
      }).fail(function () {
          showMessage('error')
      })
    });




    /**
     * Show the Preloader
     * @return {DOM} 
     */
    var showPreloader = function () {
      $('.contact__submit').hide();
      $('.contact__preloader').show();
    };

    /**
     * Hide the Preloaded and SHow the Form
     * @return {DOM} 
     */
    var showFormButton = function () {
      $('.contact__submit').show();
      $('.contact__preloader').hide();
    }

    /**
     * Show the message based on Type
     * @param  {string} type 
     * @return {DOM}
     */
    var showMessage = function (type) { 
      var message = null;
     
      if (type === "success") {
        message = $('.contact__message').attr('data-success-message');
      } else {
        message = $('.contact__message').attr('data-error-message');
      }
      
      $('.contact__preloader').hide();
      $('.contact__message').html(message).show();
    }


 

    
    
  });
}( jQuery ));

  

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFydGljbGVEaXNwbGF5LmpzIiwiQXJ0aWNsZUZvb3Rlci5qcyIsIkNhbGxvdXQuanMiLCJDb2xsYXNwaWJsZS5qcyIsIkZBUUFqYXguanMiLCJOYXZpZ2F0aW9uLmpzIiwiZnVsbHNjcmVlbi5qcyIsImluaXRpYWxpemUuanMiLCJDb250YWN0QWpheC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvSEE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQpIHtcdFxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICBcdFx0JC5hamF4KHtcbiAgXHRcdFx0dHlwZTogXCJHRVRcIixcbiAgXHRcdFx0dXJsOiAnL2FwaS92MS9wb3N0cy9ieU51bWJlci82J1xuXHRcdH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgXHRcdFx0JC5nZXQoJy4vanMvdGVtcGxhdGVzL0FydGljbGVEaXNwbGF5Lm1zdCcsIGZ1bmN0aW9uICh0ZW1wbGF0ZSkge1xuICBcdFx0XHRcdHZhciBhcnRpY2xlcyA9IHtcbiAgICAgICAgICAgIFwiYXJ0aWNsZXNcIiA6IGRhdGEuZGF0YVxuICAgICAgICAgIH1cbiAgXHRcdFx0XHRcbiAgICAgICAgICB2YXIgcmVuZGVyZWQgPSBNdXN0YWNoZS5yZW5kZXIodGVtcGxhdGUsIGFydGljbGVzKTtcbiAgXHRcdFx0XHQkKCcjYXJ0aWNsZURpc3BsYXknKS5odG1sKHJlbmRlcmVkKTtcbiAgICAgICAgfSk7XG4gIFx0XHRcdFxuICBcdFx0fSk7XG5cblxuICBcdFx0XG4gfSk7XG4gXG5cbiB9KGpRdWVyeSkpOyIsIihmdW5jdGlvbiAoJCkgeyBcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8qXG4gICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfCBQb3AgdXAgdGhlIEFydGljbGUgRm9vdGVyIG9uIFNjcm9sbFxuICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHxcbiAgICAqL1xuICAgXG4gICBpZiAoJCgnI2FydGljbGVDb250ZW50JykubGVuZ3RoICE9PSAwKSB7IFxuICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmFyIHkgPSAkKHRoaXMpLnNjcm9sbFRvcCgpOyAgICBcbiAgICAgICAgdmFyIGFydGljbGVDb250ZW50ID0gJCgnI2FydGljbGVDb250ZW50JykucG9zaXRpb24oKS50b3A7XG4gICAgICAgIHZhciBzaXRlRm9vdGVyID0gJCgnI3NpdGVGb290ZXInKS5wb3NpdGlvbigpLnRvcDtcblxuICAgICAgICBcbiAgICAgICAgIC8vQ29udGVudCBwYXN0IDIwMFxuICAgICAgICAgaWYgKHkgPiBhcnRpY2xlQ29udGVudCArIDIwMCkge1xuICAgICAgICAgICAgICAkKCcjYXJ0aWNsZUZvb3RlcicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vRm9vdGVyIGNvbWVzIGZyb20gYm90dG9tXG4gICAgICAgICAgICAgIGlmICh5ICsgd2luZG93LmlubmVySGVpZ2h0ID4gc2l0ZUZvb3Rlcikge1xuICAgICAgICAgICAgICAgICQoJyNhcnRpY2xlRm9vdGVyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJCgnI2FydGljbGVGb290ZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgIC8vU3VibWl0IHRoZSBtYWlsY2hpbXAgZm9ybTtcbiAgICAgICQoJyNtYWlsQ2hpbXBTdWJzY3JpYmUnKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG4gfShqUXVlcnkpKTtcblxuICBcblxuICBcbiIsIihmdW5jdGlvbiAoJCkge1x0XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgICB2YXIgdGV4dCA9ICQoJy5jYWxsb3V0JykudGV4dCgpO1xuICAgICAgXG4gICAgICB2YXIgYnVpbGRMaW5rID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHJldHVybiAnaHR0cDovL3R3aXR0ZXIuY29tL3NoYXJlP3VybD0nKyB1cmwgKyAnJnRleHQ9JyArIHRleHQgKyAnIC0gQE1jRGFuaWVsUkROJztcbiAgICAgIH0gXG5cbiAgICAgIHZhciBwb3B1cCA9IGZ1bmN0aW9uICh1cmwsIGhlaWdodCwgd2lkdGgpIHtcbiAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwnMTQyOTczNTY3NDkwOCcsJ3dpZHRoPScrd2lkdGgrJyxoZWlnaHQ9JytoZWlnaHQrJyx0b29sYmFyPTAsbWVudWJhcj0wLGxvY2F0aW9uPTAsc3RhdHVzPTEsc2Nyb2xsYmFycz0xLHJlc2l6YWJsZT0xLGxlZnQ9MCx0b3A9MCcpO1xuICAgICAgfVxuXG4gICAgICAkKCcuY2FsbG91dCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImNhbGxvdXRfX3R3aXR0ZXJcIj48aSBjbGFzcz1cImZhIGZhLXR3aXR0ZXJcIj48L2k+IFR3ZWV0IDxkaXY+JylcblxuICAgICAgJCgnLmNhbGxvdXRfX3R3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHBvcHVwKGJ1aWxkTGluayh1cmwpLCA3MDAsIDUwMCk7XG4gICAgICB9KVxuICB9KTtcbn0oIGpRdWVyeSApKTsiLCIoZnVuY3Rpb24gKCQpIHsgXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdFx0JCgnLmNvbGxhcHNpYmxlJykuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1ib2R5JykuaGlkZSgpO1xuXG5cdFx0JCgnLmNvbGxhcHNpYmxlJykuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ21lc3NhZ2UnKTtcblx0XHRcdHZhciBuZXh0ID0gICQodGhpcykubmV4dCgnLmNvbGxhcHNpYmxlLWJvZHknKVxuXHRcdFx0aWYgKG5leHQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG5cdFx0XHRcdG5leHQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLnNsaWRlVXAoNTAwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdhZGRpbmcnKTtcblx0XHRcdFx0bmV4dC5hZGRDbGFzcygnYWN0aXZlJykuc2xpZGVEb3duKDUwMCk7XG5cdFx0XHR9XG5cdFx0fSlcblxuICBcbiAgfSk7XG59KCBqUXVlcnkgKSk7IiwiKGZ1bmN0aW9uICgkKSB7IFxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICBcdCQoJyNmYXFRdWVyeScpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gIFx0XHR2YXIgcXVlcnkgPSAkKGUudGFyZ2V0KS52YWwoKTtcbiAgXHRcdHZhciBfdG9rZW4gPSAkKGUudGFyZ2V0KS5uZXh0KCdpbnB1dCcpLnZhbCgpO1xuXG4gICAgICBpZiAocXVlcnkgPT09IG51bGwpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICB1cmw6ICdhcGkvdjEvZmFxcy9zdGFyZWQnLFxuICAgICAgICAgIGRhdGE6IHsgXG4gICAgICAgICAgICAgICdxdWVyeScgOiBxdWVyeSwgXG4gICAgICAgICAgICAgICdfdG9rZW4nIDogX3Rva2VuIFxuICAgICAgICAgICB9XG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJlbmRlclF1ZXN0aW9uKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgdXJsOiAnYXBpL3YxL2ZhcXMvc2VhcmNoJyxcbiAgICAgICAgICBkYXRhOiB7IFxuICAgICAgICAgICAgICAncXVlcnknIDogcXVlcnksIFxuICAgICAgICAgICAgICAnX3Rva2VuJyA6IF90b2tlbiBcbiAgICAgICAgICAgfVxuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZW5kZXJRdWVzdGlvbihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgXHRcdFxuICAgICAgdmFyIHJlbmRlclF1ZXN0aW9uID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAkLmdldCgnLi9qcy90ZW1wbGF0ZXMvRmFxUXVlc3Rpb24ubXN0JywgZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgZmFxcyA9IHtcbiAgICAgICAgICAgICAgXCJmYXFzXCIgOiBkYXRhXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZW5kZXJlZCA9IE11c3RhY2hlLnJlbmRlcih0ZW1wbGF0ZSwgZmFxcyk7XG4gICAgICAgICAgICAkKCcjZmFxUXVlc3Rpb25zJykuaHRtbChyZW5kZXJlZCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gIFx0fSlcblxuICB9KTtcbn0oIGpRdWVyeSApKTtcblxuICBcbiIsIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgSmF2YXNjcmlwdCBmb3IgTmF2aWdhdGlvblxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58XG58XG4qL1xuKGZ1bmN0aW9uICgkKSB7XHRcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgLypcbiAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgfCBNYWluIE1lbnVcbiAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgfFxuICAgfFxuICAgKi8gICBcblxuICAgIC8qKlxuICAgICAqIE1ha2UgTG9nbyBjbGljayB0YWtlIHlvdSBob21lXG4gICAgICovXG4gICAgJCgnLmxvZ28nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9cIjtcbiAgICB9KVxuXG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHRoZSBNZW51XG4gICAgICovXG4gICAgJCgnI29wZW5NZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIFxuICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAkKCcjbmF2aWdhdGlvbicpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICQoJy5uYXZpZ2F0aW9uX19tb2RhbCcpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnbmF2LW9wZW4nKTtcbiAgICB9KTtcblxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIE1lbnVcbiAgICAgKiBAcmV0dXJuIFxuICAgICAqL1xuICAgICQoJy5uYXZpZ2F0aW9uX19tb2RhbCcpLm9uKCdjbGljayB0YXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAkKCcjbmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICQoJyNvcGVuTWVudScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbmF2LW9wZW4nKTtcbiAgICB9KTtcblxuXG4gICAgLypcbiAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB8IERyb3AgRG93bnNcbiAgICB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB8XG4gICAgfFxuICAgICovXG4gICAgdmFyIG9wZW5NZW51ID0gbnVsbDtcblxuICAgIC8vSGF2ZSBkcm9wZG93bnMgb3BlcmF0ZSBvbiBDbGljayBmb3IgTW9iaWxlLlxuICAgICQoJy5Ecm9wZG93bl9fdHJpZ2dlcicpLm9uKCd0YXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZHJvcERyb3BEb3duKCQodGhpcykuYXR0cignZGF0YS1kcm9wZG93bicpKTtcbiAgICB9KTtcblxuIFxuICAgIC8qKlxuICAgICAqIERyb3AgdGhlIERyb3Bkb3duXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBhdHRyIFxuICAgICAqIEByZXR1cm4ge0RPTX0gICAgICBcbiAgICAgKi9cbiAgICB2YXIgZHJvcERyb3BEb3duID0gZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHZhciBkcm9wZG93biA9ICQoJyMnICsgYXR0cik7XG5cbiAgICAgIGlmIChkcm9wZG93bi5oYXNDbGFzcygnaXMtYWN0aXZlJykpIHtcbiAgICAgICAgZHJvcGRvd24ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpLnNsaWRlVXAoNTAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyb3Bkb3duLmFkZENsYXNzKCdpcy1hY3RpdmUnKS5zbGlkZURvd24oNTAwKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qXG4gICAgfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfCBTY3JvbGxpbmcgRml4ZWQgTWVudVxuICAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHxcbiAgICB8XG4gICAgKi9cblxuICAgIC8vQWRkIEZpeGVkIG1lbnUgb24gU2Nyb2xsICBcbiAgICB2YXIgbGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgeSA9ICQodGhpcykuc2Nyb2xsVG9wKCk7ICBcbiAgICAgIHZhciBuYXZpZ2F0aW9uT2Zmc2V0ID0gJCgnI2NvbnRlbnRXcmFwcGVyJykucG9zaXRpb24oKS50b3A7XG4gICAgICBcbiAgICAgIHZhciBnbHVlZCA9ICQoJyNuYXZpZ2F0aW9uJykuaGFzQ2xhc3MoJ2dsdWVkJyk7XG4gICAgICB2YXIgZml4ZWQgPSAkKCcjbmF2aWdhdGlvbicpLmhhc0NsYXNzKCdmaXhlZCcpO1xuXG4gICAgICBpZiAoeSA+IG5hdmlnYXRpb25PZmZzZXQtMCAmJiAhZ2x1ZWQpIHtcbiAgICAgICAgJCgnI25hdmlnYXRpb24nKS5hZGRDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCduYXYtZml4ZWQnKTtcbiAgICAgIH0gZWxzZSBpZiAoIWdsdWVkKSB7XG4gICAgICAgICQoJyNuYXZpZ2F0aW9uJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbmF2LWZpeGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh5ID4gbGFzdFNjcm9sbFRvcCAmJiBmaXhlZCAmJiAhZ2x1ZWQpIHsgICAvL2Rvd253YXJkIFNjcm9sbFxuICAgICAgICAkKCcjbmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKCdpbi12aWV3Jyk7ICBcbiAgICAgICAgJCgnI3F1aWNrTmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKCdpbi12aWV3JylcbiAgICAgIH0gZWxzZSBpZiAoIWdsdWVkKSB7IC8vdXBkd2FyZCBzY3JvbGxcbiAgICAgICAgJCgnI25hdmlnYXRpb24nKS5hZGRDbGFzcygnaW4tdmlldycpO1xuICAgICAgICAkKCcjcXVpY2tOYXZpZ2F0aW9uJykuYWRkQ2xhc3MoJ2luLXZpZXcnKTtcbiAgICAgIH1cblxuICAgICAgbGFzdFNjcm9sbFRvcCA9IHk7XG4gICAgfSk7XG5cblxuXG5cbiAgICBcblxuICB9KTtcbn0oIGpRdWVyeSApKTtcbiIsIiIsImlmICh3aW5kb3cualF1ZXJ5KSB7ICBcbiAgICAvLyBqUXVlcnkgaXMgbG9hZGVkICBcbiAgICBcbiAgICAvL0luaXRhbGl6ZSBNYXRlcmlhbGl6ZSBTaGl0IGhlcmUgXG4gICAgICQoJy5tb2RhbC10cmlnZ2VyJykubGVhbk1vZGFsKCk7XG5cdCAkKCcuc2Nyb2xsc3B5Jykuc2Nyb2xsU3B5KCk7XG4gIFxuICAgICAgXG5cdC8vICQoJy5kcm9wZG93bi1idXR0b24nKS5kcm9wZG93bih7XG5cdC8vIFx0YmVsb3dvcmlnaW46IHRydWUsXG5cdC8vIFx0aG92ZXI6IHRydWUsXG5cdC8vIFx0Y29uc3RyYWlud2lkdGg6IGZhbHNlXG5cdC8vIH0pO1xuXHRcblxuXHQgJC5hamF4U2V0dXAoe1xuXHRcdGhlYWRlcnM6IHsgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS52YWwoKSB9XG5cdCB9KTtcblxuXG5cdCBcblx0IFxuXG59IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdqcXVlcnkgaXMgbm90IGxvYWRlZCcpO1xufSIsIihmdW5jdGlvbiAoJCkgeyBcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBBamF4IGZvciBBbGwgRm9ybXNcbiAgICAqL1xuICAgICQoJ2Zvcm1bZGF0YS1yZW1vdGVdJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgZm9ybSA9ICQodGhpcyk7XG4gICAgICB2YXIgbWV0aG9kID0gZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwibWV0aG9kXCJdJykudmFsKCkgfHwgJ1BPU1QnO1xuICAgICAgdmFyIHVybCA9IGZvcm0ucHJvcCgnYWN0aW9uJyk7XG5cblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZTogbWV0aG9kLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZGF0YTogZm9ybS5zZXJpYWxpemUoKSxcbiAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNob3dQcmVsb2FkZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNob3dNZXNzYWdlKCdzdWNjZXNzJyk7XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzaG93TWVzc2FnZSgnZXJyb3InKVxuICAgICAgfSlcbiAgICB9KTtcblxuXG5cblxuICAgIC8qKlxuICAgICAqIFNob3cgdGhlIFByZWxvYWRlclxuICAgICAqIEByZXR1cm4ge0RPTX0gXG4gICAgICovXG4gICAgdmFyIHNob3dQcmVsb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuY29udGFjdF9fc3VibWl0JykuaGlkZSgpO1xuICAgICAgJCgnLmNvbnRhY3RfX3ByZWxvYWRlcicpLnNob3coKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgUHJlbG9hZGVkIGFuZCBTSG93IHRoZSBGb3JtXG4gICAgICogQHJldHVybiB7RE9NfSBcbiAgICAgKi9cbiAgICB2YXIgc2hvd0Zvcm1CdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuY29udGFjdF9fc3VibWl0Jykuc2hvdygpO1xuICAgICAgJCgnLmNvbnRhY3RfX3ByZWxvYWRlcicpLmhpZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHRoZSBtZXNzYWdlIGJhc2VkIG9uIFR5cGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGUgXG4gICAgICogQHJldHVybiB7RE9NfVxuICAgICAqL1xuICAgIHZhciBzaG93TWVzc2FnZSA9IGZ1bmN0aW9uICh0eXBlKSB7IFxuICAgICAgdmFyIG1lc3NhZ2UgPSBudWxsO1xuICAgICBcbiAgICAgIGlmICh0eXBlID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICBtZXNzYWdlID0gJCgnLmNvbnRhY3RfX21lc3NhZ2UnKS5hdHRyKCdkYXRhLXN1Y2Nlc3MtbWVzc2FnZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9ICQoJy5jb250YWN0X19tZXNzYWdlJykuYXR0cignZGF0YS1lcnJvci1tZXNzYWdlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgICQoJy5jb250YWN0X19wcmVsb2FkZXInKS5oaWRlKCk7XG4gICAgICAkKCcuY29udGFjdF9fbWVzc2FnZScpLmh0bWwobWVzc2FnZSkuc2hvdygpO1xuICAgIH1cblxuXG4gXG5cbiAgICBcbiAgICBcbiAgfSk7XG59KCBqUXVlcnkgKSk7XG5cbiAgXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
